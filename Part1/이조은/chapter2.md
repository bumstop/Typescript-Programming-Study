# 타입을 미리 정하기 애매할 때(Union type, any, unknown)

## 가장 좋은 Union type 사용

"이 변수엔 string 또는 number가 들어올 수 있습니다~"라고 타입정의를 하고 싶으면 | 연산자를 쓰도록 하자! OR 연산자 같은 느낌인데 이런 타입을 전문용어로 **Union type** 이라고 부른다고 한다.

```
let 이름: string | number = 'kim';
let 나이: (string | number) = 100;
```

심심하면 괄호쳐도 된다.
이러면 이름, 나이 변수엔 string 또는 number 만 들어올 수 있다.
그리고 할당하는 순간 타입은 string 또는 number 중 하나로 변한다.

그럼 array, object 자료 만들 땐 어떻게 해야할까?

```
var 어레이: number[] = [1,'2',3]
var 오브젝트: {data : number} = { data : '123' }

==> var 어레이 : (string | number)[] = [1,"2", 3]
	var 오브젝트 : {data : (string | number)} = {data: '123'}
```

이렇게 쓰면 된다.

_참고로 변수에 정의된 Union 타입은 할당과 동시에 OR 역할이 사라진다.
array, object에 정의된 Union 타입은 OR 연산자가 유지된다._

## any 타입

아무 자료나 집어넣을 수 있는 타입이다.
쉽게 비유를 하면 실드해제이다.

```
let 이름: any = 'kim';
이름 = 123;
이름 = undefined;
이름 = [];
```

any 타입은 실드 해제 문법이기 때문에 갑자기 타입을 마구 바꿔도 에러가 나지 않는다.
any 타입은 좋다고 막 쓰면 안되는데, 타입관련 버그가 생길 경우 왜 그런지 추적이 어렵고,
타입 실드를 안 씌우면 굳이 타입스크립트를 쓸 이유가 없다.
그래서 비상시 쓰는 **변수 타입체크 해제기능** 이런 용도로 쓰자.

## any 보단 unknown 타입이 나은듯

요즘 타입스크립트는 unknown 타입을 사용한다.
any와 똑같이 모든 타입을 집어넣을 수 있다.

```
let 이름: unknown = 'kim';
이름 = 123;
이름 = undefined;
이름 = [];
```

이래도 에러가 나지 않는다. 아직 어떤 타입이 들어올 지 모를 경우, 다양한 타입을 집어넣어야 할 경우
사용한다. 중요한 특징은

1. unknown 타입엔 모든 자료 다 집어넣을 수 있다.
2. 자료 집어넣어도 타입은 그대로 unknown 이다.

```
let 이름: unknown;

let 변수1: string = 이름;
let 변수2: boolean = 이름;
let 변수3: number = 이름;
```

당연히 unknown 타입을 다른 곳에 집어넣으려고 하면 그쪽 실드가 발동해서 에러가 난다.
(any 는 안그럼)

```
let 이름: unknown;
이름[0];
이름 - 1;
이름.data;
```

이래도 에러가 난다.
(any 는 안그럼)

왜냐면 타입스크립트는 정확하고 확실한 걸 좋아한다.
그래서 확실하지 않은 타입에 뺄셈해주고 그런 거 싫어한다.
숫자가 아닌 걸 뺄셈할 수 없으니 말이다.
타입스크립트에선 뺄셈은 number 류의 타입만 할 수 있고
name 이런 건 Object 류의 타입만 할 수 있다라고 미리 정의되어 있다.

그래서 결론은
_아직 뭘 집어넣을 지는 모르겠는데, 약간의 안정성을 도모하고 싶다? unknown 타입 써보자_

사실, 코드짜다가 any, unknown을 직접 부여할 일은 거의 없고,
남이 만든 타입을 가져다가 쓰는데, 뭔가 이상하게 안될 때 임시용으로 쓴다.

Q. 이 코드는 왜 에러가 날까요?

```
let 나이: string|number;
나이 + 1;
```

타입스크립트는 엄격한 걸 좋아한다. string 타입 + 1 (허용), number 타입 + 1(허용),
string | number 타입 + 1 (안돼)

유니온 타입은 타입 2개가 합쳐져 있긴 때문에, 하나의 새로운 타입임.
그래서 number 타입이 아니기 때문에 연산 불가능.

Q. 이 코드도 왜 에러가 날까요?

```
let 나이: unknown = 1;
나이 + 1;
```

분명히 아니라는 변수는 1인데, +1 안해준다.
이유는 unknown 은 number 타입이 아니기 때문에, 연산이 안된다.

그렇다면, unknown 타입인 변수를 조작하려면, _내가 조작할 변수의 타입이 무엇인지 확실하게 체크하는 narrowing 또는 assertion 스킬을 사용해야한다._
그게 타입스크립트의 근간이 되는 코딩방법이고 _변수에 뭐가 들어있는지 모르는데, 그 변수를 사용하고
조작해야 할 경우 반드시 **narrowing** 또는 **assertion** 을 사용해야 오류가 안난다._
